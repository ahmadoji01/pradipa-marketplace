<% featured_video ||= "gE5fCfGXq3g"
   production_video ||= "i_clzek10VI"
   id ||= "yt-player" %>

<script>
    //Call the JS API Loader first on spree/sections/_youtube_js_api_loader.html.erb
    function onYouTubeIframeAPIReady(){
        player1 = new YT.Player('featured-video-player', {
            width: '100%',
            height: '100%',
            videoId: '<%= featured_video %>',
            playerVars: { 
                'autoplay': 1, 
                'rel' : 0,
                'showinfo' : 0,
                'showsearch' : 0,
                'controls' : 0,
                'mute': 1, 
                'loop': 1,
                'enablejsapi' : 1,
                'playlist': '<%= featured_video %>' },
            events: {
                'onReady': onPlayerReady
            }
        });

        player2 = new YT.Player('production-video-player', {
            width: '100%',
            height: '100%',
            videoId: '<%= production_video %>',
            playerVars: { 
                'autoplay': 1, 
                'rel' : 0,
                'showinfo' : 0,
                'showsearch' : 0,
                'controls' : 0,
                'mute': 1, 
                'loop': 1,
                'enablejsapi' : 1,
                'playlist': '<%= production_video %>' },
            events: {
                'onReady': onPlayerReady
            }
        });
    }

    function onPlayerReady(event) {
        event.target.setVolume(70);
        event.target.playVideo();
    }

    $(window).on('load', function () {
        onYouTubeIframeAPIReady();
    })
</script>